!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.MarkdownArea=t()}("undefined"!=typeof self?self:this,function(){var a=/mac|iphone|ipad|ipod/i.test(navigator.platform)?"metaKey":"ctrlKey",o=/^["'`*_[({<>})\]]$/,f=/[*_]/,_=/^[ \t]*(?:(?:[-+*]|\d+\.)[ \t]+(?:\[[ x]][ \t]+)?|>[ \t]*)*(?::[ \t]*)?/,c=/(?:[-+*]|\d+\.)[ \t]+(?:\[[ x]][ \t]+)?$/,g=/[-+*\[\]x\d.]/g,y=/[^ \t]/g,p=/(\d+)\.(?=[ \t]+$)/,m=/(?:(?:^[ \t]+)?(?:[-+*]|\d+\.|[>:])(?:[ \t]+\[[ x]])?[ \t]*|^[ \t]+)$/,d=/^(?!$)/gm,b={"`":/^``$/m,"~":/^~~$/m},v={"[":"]","(":")","{":"}","<":">"},K={"]":"[",")":"(","}":"{",">":"<"};function e(e){this._useTab=!0,this._useInline=!0,this._indent="    ",this._reOutdent=/^[ ]{4}/gm,this._reKey=t(!0,!0),this._handleKey=this._handleKey.bind(this),this.setElement(e)}function t(e,t){return new RegExp("^(?:Enter"+(e?"|Tab":"")+"|[io"+(t?"\"'`*_([{<>}\\])":"")+"])$")}function x(e,t,n,i){if(e.value=t,e.selectionStart=n,e.selectionEnd=3<arguments.length?i:n,"InputEvent"in window)try{var s=new InputEvent("input");e.dispatchEvent(s)}catch(i){}}return e.prototype={constructor:e,getElement:function(){return this._elem},setElement:function(e){this._elem&&this._elem.removeEventListener("keydown",this._handleKey),(this._elem=e).addEventListener("keydown",this._handleKey)},getValue:function(){return this._elem.value},setValue:function(e){this._elem.value=e},getIndent:function(){return this._indent},setIndent:function(e){this._indent="number"==typeof e?new Array(e+1).join(" "):(e+"").replace(/[^ \t]/g," "),this._reOutdent=new RegExp("^"+this._indent,"mg")},isTabUsed:function(){return this._useTab},useTab:function(){this._useTab=!0,this._reKey=t(!0,this._useInline)},ignoreTab:function(){this._useTab=!1,this._reKey=t(!1,this._useInline)},isInlineEnabled:function(){return this._useInline},enableInline:function(){this._useInline=!0,this._reKey=t(this._useTab,!0)},disableInline:function(){this._useInline=!1,this._reKey=t(this._useTab,!1)},destroy:function(){this._elem.removeEventListener("keydown",this._handleKey),this._elem=this._reKey=this._handleKey=this._indent=this._reOutdent=null},_handleKey:function(e){if(!e.defaultPrevented&&this._reKey.test(e.key)){var t=e.target.value.substring(0,e.target.selectionStart),n=e.target.value.substring(e.target.selectionStart,e.target.selectionEnd),i=e.target.value.substring(e.target.selectionEnd);if("Enter"!==e.key||e.ctrlKey||e.altKey||e.metaKey)if("Tab"===e.key&&!e.shiftKey||"i"===e.key&&e[a])!function(e,t,n,i,s){var r=t.length,l=t.lastIndexOf("\n")+1;l<r&&(n=t.substring(l)+n,t=t.substring(0,l));(l<r||!n)&&(r+=s.length);n?n=n.replace(d,s):t+=s;x(e,t+n+i,r,n?l+n.length:r)}(this._elem,t,n,i,this._indent);else if("Tab"===e.key&&e.shiftKey||"o"===e.key&&e[a])!function(e,t,n,i,s,r){var l=t.length,h=t.lastIndexOf("\n")+1;h<l&&(n=t.substring(h)+n,t=t.substring(0,h),n.substring(0,s.length)===s&&(l-=s.length));n=n.replace(r,""),x(e,t+n+i,l,h+n.length)}(this._elem,t,n,i,this._indent,this._reOutdent);else{if(!o.test(e.key))return;s=this._elem,r=t,l=n,h=i,u=e.key,l||u in v||h.charAt(0)!==u?!l&&("'"===u||u in K)?x(s,r+u+h,r.length+1):!l&&u in b&&b[u].test(r)?x(s,r+u+"language\n"+u+u+u+("\n"!==h.charAt(0)?"\n":"")+h,r.length+1,r.length+9):x(s,r+(K[u]||u)+l+(v[u]||u)+h,r.length+1,r.length+1+l.length):x(s,r+(f.test(u)?u+u:"")+h,r.length+1)}else!function(e,t,n,i,s){var r=n?null:(l=t,h=l.lastIndexOf("\n")+1,u=l.substring(h),a=_.exec(u),{line:u,offset:h,prefix:a&&a[0]});var l,h,u,a;!n&&r.prefix?s||r.prefix!==r.line?!s&&(d=r.prefix,c.test(d))?(t+="\n"+r.prefix.replace(p,function(e,t){return parseInt(t)+1+"."}),console.log("L2 ",r,"::",t)):(console.log("L3 ",r.prefix,"::",s),t+="\n"+(o=r.prefix,f=s,o.replace(f?y:g," "))):(t=t.substring(0,r.offset)+r.prefix.replace(m,""),console.log("L1 ",r,"::",t)):t+="\n";var o,f;var d;x(e,t+i,t.length)}(this._elem,t,n,i,e.shiftKey);e.preventDefault()}var s,r,l,h,u}},e});
//# sourceMappingURL=mdarea.min.map
